{% extends "bootstrap/base.html" %}
{% block title %} AWS S3 File Storage App{% endblock %}
{% block navbar %}

<!DOCTYPE html>
<html lang="en">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <body>

    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="/">Home</a></li>
            <li role="presentation"><a href="/storage">Storage</a></li>
            <li role="presentation"><a href="/teams">Teams</a></li>
            <li role="presentation"><a href="/players">Players</a></li>
          </ul>
        </nav>
        <h3 class="text-muted">AWS S3 Storage App</h3>
      </div>

    
      <div class="jumbotron">
          
        <h3>Welcome S3 File Uploaders</h3>
        
        <p>AWS S3 Demo</p>
    
        <h2> {{ msg }}</h2>
    
        <div>
          <h1>Upload your file here:</h1>
          <form method="POST" action="/upload" enctype=multipart/form-data>
            <input type=file name=file>
            <input type=submit value=Upload>
          </form>
        </div>
       
      </div>
      
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Football Club</th>
            <th scope="col"># Votes</th>
          </tr>
        </thead>
        <tbody>
          {% for item in contents %} 
            <tr>
              <th scope="row">{{ item.team }}</th>
              <td scope="row">{{ item.count }}</th>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      
      <canvas id="myChart" width="400" height="400"></canvas>

      <div class="row marketing">
          
        <div class="col-lg-6">
          
          
          <h4>Subheading</h4>
          <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>
           
          <h4>Subheading</h4>
          <p>Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Cras mattis consectetur purus sit amet fermentum.</p>

          <h4>Subheading</h4>
          <p>Maecenas sed diam eget risus varius blandit sit amet non magna.</p>
        </div>

        <div class="col-lg-6">
          <h4>Subheading</h4>
          <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>

          <h4>Subheading</h4>
          <p>Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Cras mattis consectetur purus sit amet fermentum.</p>

          <h4>Subheading</h4>
          <p>Maecenas sed diam eget risus varius blandit sit amet non magna.</p>
        </div>
      </div>

      <br/><br/>
      <footer class="footer">
        <p>&#169; 2020 | Ryan Bannon | Cloud Platform Programming</p>
      </footer>
      
<script>

var someJavaScriptVar = '{{ contents }}';
someJavaScriptVar = someJavaScriptVar.replaceAll("&#39;",'"'); 
//console.log(someJavaScriptVar);
var obj = JSON.parse(someJavaScriptVar);

console.log(obj);

function random_rgba() {
    var o = Math.round, r = Math.random, s = 255;
    return 'rgba(' + o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s) + ',' + r().toFixed(1) + ')';
}

var labels = []; 
var data = []; 
var colours = [];
for(var i in obj){
  labels.push(obj[i].team);
  colours.push(random_rgba());
}

for(var j in obj){
  data.push(obj[j].count);
}

console.log(labels);
console.log(data);
console.log(colours);

var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: labels,
        datasets: [{
            label: '# of Votes',
            data: data,
            backgroundColor: colours,
            borderColor: colours,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
</script>

    </div> <!-- /container -->
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>







{% endblock %}